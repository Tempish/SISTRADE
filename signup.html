<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8">
	<title>Sign Up</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

	<div class="container py-5">
		<h1 class="mb-4" id="formTitulo">Crear cuenta</h1>

		<div class="card p-4 mb-4">
			<form id="signupForm">
				<div class="mb-3">
					<label for="name" class="form-label">Nombre</label>
					<input type="text" class="form-control" id="name" required>
				</div>

				<div class="mb-3">
					<label for="password" class="form-label">Contraseña</label>
					<input type="password" class="form-control" id="password" required>
				</div>

				<div class="mb-3">
					<label for="address" class="form-label">Dirección</label>
					<input type="text" class="form-control" id="address" required>
				</div>

				<div class="mb-3">
					<label for="age" class="form-label">Edad</label>
					<input type="number" class="form-control" id="age" required>
				</div>

				<button type="submit" class="btn btn-primary" id="btnGuardar">Registrarse</button>
			</form>
		</div>
	</div>

	<script>
		const signupUrl = "http://localhost:8080/api/user";

		document.getElementById("signupForm").addEventListener("submit", function (event) {
			event.preventDefault();

			const name = document.getElementById("name").value;
			const password = document.getElementById("password").value;
			const address = document.getElementById("address").value;
			const age = parseInt(document.getElementById("age").value);

			fetch(signupUrl, {
				method: "POST",
				headers: { "Content-Type": "application/json" },
				body: JSON.stringify({ name, password, address, age })
			})
				.then(res => {
					if (!res.ok) return res.text().then(msg => { throw new Error(msg); });
					return res.json();
				})
				.then(data => {
					alert("Usuario registrado con éxito");
					document.getElementById("signupForm").reset();
				})
				.catch(err => {
					alert("Error: " + err.message);
				});
		});
	</script>
</body>

</html>